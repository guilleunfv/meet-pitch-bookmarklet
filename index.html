<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instalar Asistente de Pitch para Meet</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; line-height: 1.6; margin: 0; padding: 30px; background-color: #f6f8fa; color: #24292e; }
        .container { max-width: 700px; margin: 0 auto; background-color: #fff; padding: 20px 30px; border-radius: 8px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); }
        h1 { color: #0366d6; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        p { margin-bottom: 1em; }
        .bookmarklet-link {
            display: inline-block;
            padding: 12px 24px;
            background-color: #2c974b; /* Verde GitHub */
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: bold;
            border: 1px solid #258040;
            box-shadow: inset 0 -2px 0 rgba(0,0,0,0.15);
            transition: background-color 0.2s ease-in-out;
        }
        .bookmarklet-link:hover { background-color: #278742; }
        .code-block { background-color: #f6f8fa; padding: 10px; border-radius: 5px; font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace; font-size: 0.9em; overflow-x: auto; margin-bottom: 1em; }
        .important-note { background-color: #fffbdd; border-left: 4px solid #ffc107; padding: 10px 15px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Asistente de Pitch para Google Meet</h1>
        <p>Arrastra el siguiente botón/enlace a tu barra de marcadores del navegador para instalar el asistente de pitch para Google Meet.</p>
        <p>Este bookmarklet cargará el guion directamente desde este repositorio de GitHub.</p>

        <a id="installBookmarklet" class="bookmarklet-link" href="#">
            Arrastrar: Pitch Meet
        </a>

        <div class="important-note">
            <p><strong>Nota:</strong> Si actualizas el archivo <code>pitch.txt</code> en este repositorio, el bookmarklet automáticamente usará la nueva versión la próxima vez que lo actives.</p>
        </div>

        <h2>¿Cómo funciona?</h2>
        <p>El enlace de arriba es un "bookmarklet". Contiene un pequeño código JavaScript que, cuando lo haces clic desde tu barra de marcadores en una página de Google Meet, hará lo siguiente:</p>
        <ul>
            <li>Contactará a este repositorio de GitHub para obtener el contenido más reciente del archivo <code>pitch.txt</code>.</li>
            <li>Mostrará ese contenido en un recuadro dentro de tu ventana de Google Meet.</li>
            <li>Puedes hacer clic de nuevo en el bookmarklet para ocultar/mostrar el recuadro, o usar la 'X' en el recuadro.</li>
        </ul>
    </div>

<script>
// <!--
// ¡¡¡IMPORTANTE!!!
// REEMPLAZA 'TU_USUARIO_GITHUB' Y 'TU_NOMBRE_REPOSITORIO'
// CON TUS VALORES REALES EN LA LÍNEA DE pitchFileUrl ABAJO.
// -->
const GITHUB_USER = 'guilleunfv'; // Ejemplo: 'octocat'
const REPO_NAME = 'meet-pitch-bookmarklet'; // Ejemplo: 'meet-pitch-bookmarklet'
const PITCH_FILE_PATH = 'pitch.txt'; // El nombre de tu archivo de pitch

// Construye la URL raw del archivo de pitch en GitHub
// La URL para un archivo raw en un repo público es:
// https://raw.githubusercontent.com/USUARIO/REPOSITORIO/main/RUTA_AL_ARCHIVO
// (Asume que tu rama principal se llama 'main'. Si se llama 'master' u otra cosa, ajústalo)
const pitchFileUrl = `https://raw.githubusercontent.com/${GITHUB_USER}/${REPO_NAME}/main/${PITCH_FILE_PATH}`;

const bookmarkletCode = `javascript:(async function() {
    const PITCH_TEXT_URL = '${pitchFileUrl}';
    const PITCH_BOX_ID = 'myMeetPitchFromRepo';
    let pitchBox = document.getElementById(PITCH_BOX_ID);

    if (pitchBox) {
        pitchBox.remove();
    } else {
        try {
            const response = await fetch(PITCH_TEXT_URL + '?cache_bust=' + new Date().getTime());
            if (!response.ok) {
                throw new Error('HTTP error! status: ' + response.status + ' - ' + response.statusText + '. URL: ' + PITCH_TEXT_URL);
            }
            const miPitch = await response.text();
            pitchBox = document.createElement('div');
            pitchBox.id = PITCH_BOX_ID;
            pitchBox.innerText = miPitch;
            pitchBox.style.cssText = 'position:fixed;top:70px;right:15px;width:320px;max-height:calc(100vh - 100px);overflow-y:auto;background-color:rgba(250,245,230,0.97);border:1px solid #d3c7a6;padding:15px;z-index:2147483647;font-size:13px;line-height:1.5;font-family:Arial,Helvetica,sans-serif;box-shadow:0 4px 12px rgba(0,0,0,0.2);border-radius:8px;white-space:pre-wrap;';
            const closeButton = document.createElement('button');
            closeButton.innerText = '×';
            closeButton.setAttribute('aria-label', 'Cerrar pitch');
            closeButton.style.cssText = 'position:absolute;top:5px;right:8px;background:transparent;color:#666;border:none;border-radius:4px;padding:1px 7px;font-size:20px;font-weight:bold;line-height:1;cursor:pointer;';
            closeButton.onmouseover = function() { this.style.color = '#000'; this.style.background = '#f0f0f0'; };
            closeButton.onmouseout = function() { this.style.color = '#666'; this.style.background = 'transparent'; };
            closeButton.onclick = function(e) { e.stopPropagation(); if(pitchBox) pitchBox.remove(); };
            pitchBox.appendChild(closeButton);
            document.body.appendChild(pitchBox);
        } catch (error) {
            console.error('Error Pitch Bookmarklet: ', error);
            alert('No se pudo cargar el pitch. Detalles: ' + error.message + '\\nPor favor, revisa la consola para más detalles y asegúrate que la URL del pitch ('+PITCH_TEXT_URL+') es correcta y accesible.');
        }
    }
})();`;

document.getElementById('installBookmarklet').setAttribute('href', bookmarkletCode);
</script>

</body>
</html>
